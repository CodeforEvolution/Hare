LIBRARY = libstring.a
INCLUDE_DIR = ../../include
LIBRARY_DIR = ../../lib
HEADER_DIR = ../../include/String

HDRS =	String.h

SRCS =	String.cpp

OBJS = $(SRCS:.cpp=.o)

CC = g++
CFLAGS = -DDEBUG -g
AR = ar
AR_FLAGS = -rcus
MIMESET = mimeset

$(LIBRARY) : $(OBJS)
	$(AR) $(AR_FLAGS) "$(LIBRARY)" *.o
	$(MIMESET) -f "$(LIBRARY)"
	chmod 755 $(LIBRARY)

clean  :
	rm -f *.o $(LIBRARY)

install : $(LIBRARY)
	mkdir -p $(HEADER_DIR)
	cp -f $(HDRS) $(HEADER_DIR)
	cp -f $(LIBRARY) $(LIBRARY_DIR)

cleaninstall : clean
	rm -rf $(HEADER_DIR)
	rm -f $(LIBRARY_DIR)/$(LIBRARY)

release : CFLAGS = -O3
release : cleaninstall install
	make clean

%.o : %.cpp
	$(CC) -c $< $(CFLAGS) -I$(INCLUDE_DIR) -o $@
